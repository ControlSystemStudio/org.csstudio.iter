record (bo,"TEST-BST0:PUMP")
{
	field(DESC, "Pump ON/OFF")
	field(DOL, "0")
	field(IVOA, "Set output to IVOV")
	field(IVOV, "0")
	field(ONAM, "ON")
	field(PINI, "YES")
	field(SCAN, "1 second")
	field(ZNAM, "OFF")
}
record (bi,"TEST-BST0:HIGH-SWITCH")
{
	field(DESC, "Tank High level")
	field(INP, "0")
	field(ONAM, "Wet")
	field(OSV, "MAJOR")
	field(PINI, "YES")
	field(SCAN, "1 second")
	field(ZNAM, "Dry")
	field(ZSV, "NO_ALARM")
}
record (calcout,"TEST-BST0:HIGH-CHECK")
{
	field(CALC, "A")
	field(DESC, "Force ON pump?")
	field(DOPT, "Use OCAL")
	field(INPA, "TEST-BST0:HIGH-SWITCH CP MS")
	field(OCAL, "1")
	field(OOPT, "Transition To Non-zero")
	field(OUT, "TEST-BST0:PUMP PP")
}
record (bi,"TEST-BST0:LOW-SWITCH")
{
	field(DESC, "Tank Low level")
	field(INP, "0")
	field(ONAM, "Wet")
	field(OSV, "NO_ALARM")
	field(PINI, "YES")
	field(SCAN, "1 second")
	field(ZNAM, "Dry")
	field(ZSV, "MAJOR")
}
record (calcout,"TEST-BST0:LOW-CHECK")
{
	field(CALC, "A")
	field(DESC, "Force OFF pump?")
	field(DOPT, "Use OCAL")
	field(INPA, "TEST-BST0:LOW-SWITCH CP MS")
	field(OCAL, "0")
	field(OOPT, "Transition To Zero")
	field(OUT, "TEST-BST0:PUMP PP")
}
record (bi,"TEST-BST0:MID-SWITCH")
{
	field(DESC, "Tank Mid level")
	field(INP, "0")
	field(ONAM, "Wet")
	field(PINI, "YES")
	field(SCAN, "1 second")
	field(ZNAM, "Dry")
}
record (calcout,"TEST-BST0:MID-CHECK")
{
	field(CALC, "A")
	field(DESC, "Start pump?")
	field(DOPT, "Use OCAL")
	field(INPA, "TEST-BST0:MID-SWITCH CP MS")
	field(OCAL, "1")
	field(OOPT, "Transition To Non-zero")
	field(OUT, "TEST-BST0:PUMP PP")
}
record (calcout,"TEST-BST0:TIMER-START")
{
	field(CALC, "!C && !D && (A == 1 || (B > 0 && B <=25))")
	field(DESC, "Start timer?")
	field(INPA, "TEST-BST0:MID-SWITCH CP MS")
	field(INPB, "TEST-BST0:MID-TIMER CP")
	field(INPC, "TEST-BST0:TANK-INTERLOCK CP")
	field(INPD, "TEST-BST0:TANK-MODE CP")
	field(OCAL, "0")
	field(OOPT, "Transition To Zero")
	field(OUT, "TEST-BST0:MID-TIMER PP")
}
record (calcout,"TEST-BST0:TIMER-CHECK")
{
	field(CALC, "A")
	field(DESC, "Stop pump?")
	field(DOPT, "Use OCAL")
	field(INPA, "TEST-BST0:TIMER-START CP MS")
	field(OCAL, "0")
	field(OOPT, "Transition To Zero")
	field(OUT, "TEST-BST0:PUMP PP")
}
record (calc,"TEST-BST0:MID-TIMER")
{
	field(CALC, "A <= 25 ? A+1:0")
	field(DESC, "Timer of 25 seconds")
	field(DISV, "0")
	field(INPA, "TEST-BST0:MID-TIMER")
	field(SCAN, "1 second")
	field(SDIS, "TEST-BST0:TIMER-START")
	field(VAL, "0")
}
record (bo,"TEST-BST0:MID-SWITCH-FAIL")
{
	field(DESC, "Failure of MID switch")
	field(DOL, "0")
	field(ONAM, "ON")
	field(OSV, "MAJOR")
	field(PINI, "YES")
	field(SCAN, "1 second")
	field(ZNAM, "OFF")
	field(ZSV, "NO_ALARM")
}
record (calc,"TEST-BST0:TANK-LEVEL")
{
	field(ADEL, "10")
	field(CALC, "(!B && !C)?A+2*RNDM:A-2*RNDM")
	field(DESC, "Tank level with ADEL")
	field(DISV, "1")
	field(EGU, "m3")
	field(HHSV, "MAJOR")
	field(HIGH, "80")
	field(HIHI, "90")
	field(HOPR, "100")
	field(HSV, "MINOR")
	field(INPA, "TEST-BST0:TANK-LEVEL")
	field(INPB, "TEST-BST0:TANK-MID")
	field(INPC, "TEST-BST0:TIMER-START")
	field(LLSV, "MAJOR")
	field(LOLO, "10")
	field(LOPR, "0")
	field(LOW, "20")
	field(LSV, "MINOR")
	field(PREC, "2")
	field(SCAN, "2 second")
	field(SDIS, "TEST-BST0:TANK-INTERLOCK")
	field(VAL, "35")
}
record (calcout,"TEST-BST0:TANK-HIGH")
{
	field(CALC, "A > B")
	field(DESC, "High Level?")
	field(INPA, "TEST-BST0:TANK-LEVEL CP MS")
	field(INPB, "TEST-BST0:TANK-LEVEL.HIGH")
	field(OOPT, "On Change")
	field(OUT, "TEST-BST0:HIGH-SWITCH PP")
}
record (calcout,"TEST-BST0:TANK-LOW")
{
	field(CALC, "!(A < B)")
	field(DESC, "Low Level?")
	field(INPA, "TEST-BST0:TANK-LEVEL CP MS")
	field(INPB, "TEST-BST0:TANK-LEVEL.LOW")
	field(OOPT, "On Change")
	field(OUT, "TEST-BST0:LOW-SWITCH PP")
}
record (calcout,"TEST-BST0:TANK-MID")
{
	field(CALC, "A > B/2 - 5")
	field(DESC, "Mid Level?")
	field(DISV, "1")
	field(INPA, "TEST-BST0:TANK-LEVEL CP MS")
	field(INPB, "TEST-BST0:TANK-LEVEL.HOPR")
	field(OOPT, "On Change")
	field(OUT, "TEST-BST0:MID-SWITCH PP")
	field(SDIS, "TEST-BST0:MID-SWITCH-FAIL")
}
record (calcout,"TEST-BST0:TANK-INTERLOCK")
{
	field(CALC, "(A >= B-5 || A <= C+5) && !D")
	field(DESC, "Tank Interlock")
	field(INPA, "TEST-BST0:TANK-LEVEL CP MS")
	field(INPB, "TEST-BST0:TANK-LEVEL.HOPR")
	field(INPC, "TEST-BST0:TANK-LEVEL.LOPR")
	field(INPD, "TEST-BST0:TANK-MODE CP")
	field(IVOA, "Set output to IVOV")
	field(IVOV, "1")
}
record (bo,"TEST-BST0:TANK-MODE")
{
	field(DESC, "Allow to reset the process")
	field(HIGH, "15.0")
	field(ONAM, "Override")
	field(PINI, "YES")
	field(VAL, "0")
	field(ZNAM, "Operational")
}
record (stringin,"TEST-BST0:IOC-TIME")
{
	field(DESC, "IOC Current Date and Time")
	field(DTYP, "Soft Timestamp")
	field(INP, "@%d/%m/%Y %H:%M:%S")
	field(PINI, "YES")
	field(SCAN, "1 second")
}
